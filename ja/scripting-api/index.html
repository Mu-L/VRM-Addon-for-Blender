<!doctype html><html lang=ja dir=ltr class=scroll-smooth data-default-appearance=dark data-auto-appearance=false><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=theme-color content="rgb(255,255,255)"><meta http-equiv=x-ua-compatible content="ie=edge"><title>Pythonスクリプトによる自動化サンプル &#183; VRM Add-on for Blender</title><meta name=title content="Pythonスクリプトによる自動化サンプル &#183; VRM Add-on for Blender"><meta name=description content="Pythonスクリプトを利用してVRM関連処理を自動化するサンプルです。"><link rel=canonical href=https://vrm-addon-for-blender.info/ja/scripting-api/><link rel=alternate type=application/rss+xml href=/ja/scripting-api/index.xml title="VRM Add-on for Blender"><link type=text/css rel=stylesheet href=/css/main.bundle.min.2de799e14ed7f2e0f992f49864657afa517c2681a137ca9215ba2e119d2929da2569c9aa6057fb7091a6f20ba670fc624322aab48e3e54649ff5aae6c433df85.css integrity="sha512-LeeZ4U7X8uD5kvSYZGV6+lF8JoGhN8qSFbouEZ0pKdolacmqYFf7cJGm8gumcPxiQyKqtI4+VGSf9armxDPfhQ=="><script type=text/javascript src=/js/appearance.min.c6198a5ecbc6c7b35a8568d29315f50cf5d775d4461c515a476359767f1a745c245aa83fa96b0c7d83da976cf77481e1fc29537a2391a53ffe69a991638802e6.js integrity="sha512-xhmKXsvGx7NahWjSkxX1DPXXddRGHFFaR2NZdn8adFwkWqg/qWsMfYPal2z3dIHh/ClTeiORpT/+aamRY4gC5g=="></script>
<link rel=apple-touch-icon sizes=57x57 href=/apple-icon-57x57.png><link rel=apple-touch-icon sizes=60x60 href=/apple-icon-60x60.png><link rel=apple-touch-icon sizes=72x72 href=/apple-icon-72x72.png><link rel=apple-touch-icon sizes=76x76 href=/apple-icon-76x76.png><link rel=apple-touch-icon sizes=114x114 href=/apple-icon-114x114.png><link rel=apple-touch-icon sizes=120x120 href=/apple-icon-120x120.png><link rel=apple-touch-icon sizes=144x144 href=/apple-icon-144x144.png><link rel=apple-touch-icon sizes=152x152 href=/apple-icon-152x152.png><link rel=apple-touch-icon sizes=180x180 href=/apple-icon-180x180.png><link rel=icon type=image/png sizes=192x192 href=/android-icon-192x192.png><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=96x96 href=/favicon-96x96.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=manifest href=/manifest.json><meta name=msapplication-TileColor content="#27272a"><meta name=msapplication-TileImage content="/ms-icon-144x144.png"><meta name=theme-color content="#27272a"><meta property="og:title" content="Pythonスクリプトによる自動化サンプル"><meta property="og:description" content="Pythonスクリプトを利用してVRM関連処理を自動化するサンプルです。"><meta property="og:type" content="website"><meta property="og:url" content="https://vrm-addon-for-blender.info/ja/scripting-api/"><meta property="og:image" content="https://vrm-addon-for-blender.info/images/scripting_api.png"><meta property="og:site_name" content="VRM Add-on for Blender"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://vrm-addon-for-blender.info/images/scripting_api.png"><meta name=twitter:title content="Pythonスクリプトによる自動化サンプル"><meta name=twitter:description content="Pythonスクリプトを利用してVRM関連処理を自動化するサンプルです。"><script async src="https://www.googletagmanager.com/gtag/js?id=G-L4E126M2JR"></script>
<script>var doNotTrack=!1;if(!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-L4E126M2JR",{anonymize_ip:!1})}</script><script type=text/javascript src=/js/locale_redirection.js></script><meta name=thumbnail content="https://vrm-addon-for-blender.info/en/top.en.png"></head><body class="flex flex-col h-screen px-6 m-auto text-lg leading-7 max-w-7xl bg-neutral text-neutral-900 dark:bg-neutral-800 dark:text-neutral sm:px-14 md:px-24 lg:px-32"><div id=the-top class="absolute flex self-center"><a class="px-3 py-1 text-sm -translate-y-8 rounded-b-lg bg-primary-200 focus:translate-y-0 dark:bg-neutral-600" href=#main-content><span class="font-bold text-primary-600 ltr:pr-2 rtl:pl-2 dark:text-primary-400">&darr;</span>メインコンテンツへスキップ</a></div><header class="py-6 font-semibold text-neutral-900 dark:text-neutral print:hidden sm:py-10"><nav class="flex items-start justify-between sm:items-center"><div class="flex flex-row items-center"><a class="decoration-primary-500 hover:underline hover:decoration-2 hover:underline-offset-2" rel=me href=/ja>VRM Add-on for Blender</a><ul class="flex flex-row list-none"><li class=ml-2><a href=/en/scripting-api/ class="decoration-primary-500 hover:underline hover:decoration-2 hover:underline-offset-2"></a></li><li class=ml-2><a href=/ja/scripting-api/ class="decoration-primary-500 hover:underline hover:decoration-2 hover:underline-offset-2"></a></li></ul></div><ul class="flex flex-col list-none ltr:text-right rtl:text-left sm:flex-row"><li class="mb-1 group sm:mb-0 ltr:sm:mr-7 ltr:sm:last:mr-0 rtl:sm:ml-7 rtl:sm:last:ml-0"><a href=https://vrm-addon-for-blender.info/releases/VRM_Addon_for_Blender-release.zip title><span class="decoration-primary-500 group-hover:underline group-hover:decoration-2 group-hover:underline-offset-2">ダウンロード</span></a></li><li class="mb-1 group sm:mb-0 ltr:sm:mr-7 ltr:sm:last:mr-0 rtl:sm:ml-7 rtl:sm:last:ml-0"><a href=https://github.com/saturday06/VRM-Addon-for-Blender/issues title><span class="decoration-primary-500 group-hover:underline group-hover:decoration-2 group-hover:underline-offset-2">バグを報告</span></a></li></ul></nav></header><div class="relative flex flex-col grow"><main id=main-content class=grow><header><h1 class="mt-0 text-4xl font-extrabold text-neutral-900 dark:text-neutral">Pythonスクリプトによる自動化サンプル</h1></header><section class="mt-0 prose flex max-w-full flex-col dark:prose-invert lg:flex-row"><div class="min-w-0 min-h-0 max-w-prose grow"><ul><li><a href=#vrm%e3%83%95%e3%82%a1%e3%82%a4%e3%83%ab%e3%81%ae%e3%82%a4%e3%83%b3%e3%83%9d%e3%83%bc%e3%83%88>VRMファイルのインポート</a></li><li><a href=#vrm%e3%83%95%e3%82%a1%e3%82%a4%e3%83%ab%e3%81%ae%e3%82%a8%e3%82%af%e3%82%b9%e3%83%9d%e3%83%bc%e3%83%88>VRMファイルのエクスポート</a></li><li><a href=#vrm%e3%83%a1%e3%82%bf%e3%83%87%e3%83%bc%e3%82%bf%e3%81%ae%e8%a8%ad%e5%ae%9a>VRMメタデータの設定</a></li><li><a href=#vrm%e3%83%9c%e3%83%bc%e3%83%b3%e3%81%ae%e8%a8%ad%e5%ae%9a>VRMボーンの設定</a></li><li><a href=#vrm-mtoon%e3%83%9e%e3%83%86%e3%83%aa%e3%82%a2%e3%83%ab%e3%81%ae%e5%80%a4%e3%82%92%e8%a8%ad%e5%ae%9a>VRM MToonマテリアルの値を設定</a></li><li><a href=#vrm%e3%81%ae%e3%82%ad%e3%83%a3%e3%83%a9%e3%82%af%e3%82%bf%e3%83%bc%e3%82%92%e5%8b%95%e7%9a%84%e3%81%ab%e7%94%9f%e6%88%90%e3%81%97%e3%83%95%e3%82%a1%e3%82%a4%e3%83%ab%e3%81%ab%e3%82%a8%e3%82%af%e3%82%b9%e3%83%9d%e3%83%bc%e3%83%88>VRMのキャラクターを動的に生成しファイルにエクスポート</a></li></ul><h2 id=vrmファイルのインポート class="relative group">VRMファイルのインポート <span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#vrm%e3%83%95%e3%82%a1%e3%82%a4%e3%83%ab%e3%81%ae%e3%82%a4%e3%83%b3%e3%83%9d%e3%83%bc%e3%83%88 aria-label=アンカー>#</a></span></h2><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=kn>import</span> <span class=nn>bpy</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>result</span> <span class=o>=</span> <span class=n>bpy</span><span class=o>.</span><span class=n>ops</span><span class=o>.</span><span class=n>import_scene</span><span class=o>.</span><span class=n>vrm</span><span class=p>(</span><span class=n>filepath</span><span class=o>=</span><span class=s2>&#34;path_to_your_vrm_model.vrm&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=k>if</span> <span class=n>result</span> <span class=o>!=</span> <span class=p>{</span><span class=s2>&#34;FINISHED&#34;</span><span class=p>}:</span>
</span></span><span class=line><span class=cl>    <span class=k>raise</span> <span class=ne>Exception</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;Failed to import vrm: </span><span class=si>{</span><span class=n>result</span><span class=si>}</span><span class=s2>&#34;</span><span class=p>)</span>
</span></span></code></pre></div><h2 id=vrmファイルのエクスポート class="relative group">VRMファイルのエクスポート <span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#vrm%e3%83%95%e3%82%a1%e3%82%a4%e3%83%ab%e3%81%ae%e3%82%a8%e3%82%af%e3%82%b9%e3%83%9d%e3%83%bc%e3%83%88 aria-label=アンカー>#</a></span></h2><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=kn>import</span> <span class=nn>bpy</span>
</span></span><span class=line><span class=cl><span class=kn>from</span> <span class=nn>pathlib</span> <span class=kn>import</span> <span class=n>Path</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>output_filepath</span> <span class=o>=</span> <span class=nb>str</span><span class=p>(</span><span class=n>Path</span><span class=o>.</span><span class=n>home</span><span class=p>()</span> <span class=o>/</span> <span class=s2>&#34;path_to_your_new_vrm_model.vrm&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>result</span> <span class=o>=</span> <span class=n>bpy</span><span class=o>.</span><span class=n>ops</span><span class=o>.</span><span class=n>export_scene</span><span class=o>.</span><span class=n>vrm</span><span class=p>(</span><span class=n>filepath</span><span class=o>=</span><span class=n>output_filepath</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=k>if</span> <span class=n>result</span> <span class=o>!=</span> <span class=p>{</span><span class=s2>&#34;FINISHED&#34;</span><span class=p>}:</span>
</span></span><span class=line><span class=cl>    <span class=k>raise</span> <span class=ne>Exception</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;Failed to export vrm: </span><span class=si>{</span><span class=n>result</span><span class=si>}</span><span class=s2>&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;</span><span class=si>{</span><span class=n>output_filepath</span><span class=si>=}</span><span class=s2>&#34;</span><span class=p>)</span>
</span></span></code></pre></div><h2 id=vrmメタデータの設定 class="relative group">VRMメタデータの設定 <span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#vrm%e3%83%a1%e3%82%bf%e3%83%87%e3%83%bc%e3%82%bf%e3%81%ae%e8%a8%ad%e5%ae%9a aria-label=アンカー>#</a></span></h2><p>VRM 1.0のモデルを想定します。</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=kn>import</span> <span class=nn>bpy</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>context</span> <span class=o>=</span> <span class=n>bpy</span><span class=o>.</span><span class=n>context</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>bpy</span><span class=o>.</span><span class=n>ops</span><span class=o>.</span><span class=n>object</span><span class=o>.</span><span class=n>add</span><span class=p>(</span><span class=nb>type</span><span class=o>=</span><span class=s2>&#34;ARMATURE&#34;</span><span class=p>,</span> <span class=n>location</span><span class=o>=</span><span class=p>(</span><span class=mi>0</span><span class=p>,</span> <span class=mi>0</span><span class=p>,</span> <span class=mi>0</span><span class=p>))</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>armature</span> <span class=o>=</span> <span class=n>context</span><span class=o>.</span><span class=n>object</span>
</span></span><span class=line><span class=cl><span class=n>armature</span><span class=o>.</span><span class=n>data</span><span class=o>.</span><span class=n>vrm_addon_extension</span><span class=o>.</span><span class=n>spec_version</span> <span class=o>=</span> <span class=s2>&#34;1.0&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>meta</span> <span class=o>=</span> <span class=n>armature</span><span class=o>.</span><span class=n>data</span><span class=o>.</span><span class=n>vrm_addon_extension</span><span class=o>.</span><span class=n>vrm1</span><span class=o>.</span><span class=n>meta</span>
</span></span><span class=line><span class=cl><span class=n>meta</span><span class=o>.</span><span class=n>vrm_name</span> <span class=o>=</span> <span class=s2>&#34;Your Model Name&#34;</span>
</span></span><span class=line><span class=cl><span class=n>meta</span><span class=o>.</span><span class=n>version</span> <span class=o>=</span> <span class=s2>&#34;1.0.0&#34;</span>
</span></span><span class=line><span class=cl><span class=n>meta</span><span class=o>.</span><span class=n>authors</span><span class=o>.</span><span class=n>add</span><span class=p>()</span><span class=o>.</span><span class=n>value</span> <span class=o>=</span> <span class=s2>&#34;Author 1&#34;</span>
</span></span><span class=line><span class=cl><span class=n>meta</span><span class=o>.</span><span class=n>copyright_information</span> <span class=o>=</span> <span class=s2>&#34;Copyright Information&#34;</span>
</span></span><span class=line><span class=cl><span class=n>meta</span><span class=o>.</span><span class=n>contact_information</span> <span class=o>=</span> <span class=s2>&#34;Contact Information&#34;</span>
</span></span><span class=line><span class=cl><span class=n>meta</span><span class=o>.</span><span class=n>references</span><span class=o>.</span><span class=n>add</span><span class=p>()</span><span class=o>.</span><span class=n>value</span> <span class=o>=</span> <span class=s2>&#34;https://example.com&#34;</span>
</span></span><span class=line><span class=cl><span class=n>meta</span><span class=o>.</span><span class=n>third_party_licenses</span> <span class=o>=</span> <span class=s2>&#34;Third Party Licenses&#34;</span>
</span></span><span class=line><span class=cl><span class=n>thumbnail_image</span> <span class=o>=</span> <span class=n>context</span><span class=o>.</span><span class=n>blend_data</span><span class=o>.</span><span class=n>images</span><span class=o>.</span><span class=n>new</span><span class=p>(</span><span class=n>name</span><span class=o>=</span><span class=s2>&#34;New Image&#34;</span><span class=p>,</span> <span class=n>width</span><span class=o>=</span><span class=mi>32</span><span class=p>,</span> <span class=n>height</span><span class=o>=</span><span class=mi>32</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>meta</span><span class=o>.</span><span class=n>thumbnail_image</span> <span class=o>=</span> <span class=n>thumbnail_image</span>
</span></span><span class=line><span class=cl><span class=n>meta</span><span class=o>.</span><span class=n>avatar_permission</span> <span class=o>=</span> <span class=s2>&#34;onlyAuthor&#34;</span>  <span class=c1># or &#34;onlySeparatelyLicensedPerson&#34;, &#34;everyone&#34;</span>
</span></span><span class=line><span class=cl><span class=n>meta</span><span class=o>.</span><span class=n>allow_excessively_violent_usage</span> <span class=o>=</span> <span class=kc>False</span>
</span></span><span class=line><span class=cl><span class=n>meta</span><span class=o>.</span><span class=n>allow_excessively_sexual_usage</span> <span class=o>=</span> <span class=kc>False</span>
</span></span><span class=line><span class=cl><span class=n>meta</span><span class=o>.</span><span class=n>commercial_usage</span> <span class=o>=</span> <span class=s2>&#34;personalNonProfit&#34;</span>  <span class=c1># or &#34;personalProfit&#34;, &#34;corporation&#34;</span>
</span></span><span class=line><span class=cl><span class=n>meta</span><span class=o>.</span><span class=n>allow_political_or_religious_usage</span> <span class=o>=</span> <span class=kc>False</span>
</span></span><span class=line><span class=cl><span class=n>meta</span><span class=o>.</span><span class=n>allow_antisocial_or_hate_usage</span> <span class=o>=</span> <span class=kc>False</span>
</span></span><span class=line><span class=cl><span class=n>meta</span><span class=o>.</span><span class=n>credit_notation</span> <span class=o>=</span> <span class=s2>&#34;required&#34;</span>  <span class=c1># or &#34;unnecessary&#34;</span>
</span></span><span class=line><span class=cl><span class=n>meta</span><span class=o>.</span><span class=n>allow_redistribution</span> <span class=o>=</span> <span class=kc>False</span>
</span></span><span class=line><span class=cl><span class=n>meta</span><span class=o>.</span><span class=n>modification</span> <span class=o>=</span> <span class=s2>&#34;prohibited&#34;</span>  <span class=c1># or &#34;allowModification&#34;, &#34;allowModificationRedistribution&#34;</span>
</span></span><span class=line><span class=cl><span class=n>meta</span><span class=o>.</span><span class=n>other_license_url</span> <span class=o>=</span> <span class=s2>&#34;&#34;</span>
</span></span></code></pre></div><h2 id=vrmボーンの設定 class="relative group">VRMボーンの設定 <span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#vrm%e3%83%9c%e3%83%bc%e3%83%b3%e3%81%ae%e8%a8%ad%e5%ae%9a aria-label=アンカー>#</a></span></h2><p>VRM 1.0のモデルを想定します。</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=kn>import</span> <span class=nn>bpy</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>context</span> <span class=o>=</span> <span class=n>bpy</span><span class=o>.</span><span class=n>context</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>bpy</span><span class=o>.</span><span class=n>ops</span><span class=o>.</span><span class=n>object</span><span class=o>.</span><span class=n>add</span><span class=p>(</span><span class=nb>type</span><span class=o>=</span><span class=s2>&#34;ARMATURE&#34;</span><span class=p>,</span> <span class=n>location</span><span class=o>=</span><span class=p>(</span><span class=mi>0</span><span class=p>,</span> <span class=mi>0</span><span class=p>,</span> <span class=mi>0</span><span class=p>))</span>
</span></span><span class=line><span class=cl><span class=n>armature</span> <span class=o>=</span> <span class=n>context</span><span class=o>.</span><span class=n>object</span>
</span></span><span class=line><span class=cl><span class=n>armature</span><span class=o>.</span><span class=n>data</span><span class=o>.</span><span class=n>vrm_addon_extension</span><span class=o>.</span><span class=n>spec_version</span> <span class=o>=</span> <span class=s2>&#34;1.0&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>bpy</span><span class=o>.</span><span class=n>ops</span><span class=o>.</span><span class=n>object</span><span class=o>.</span><span class=n>mode_set</span><span class=p>(</span><span class=n>mode</span><span class=o>=</span><span class=s2>&#34;EDIT&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>hips_bone</span> <span class=o>=</span> <span class=n>armature</span><span class=o>.</span><span class=n>data</span><span class=o>.</span><span class=n>edit_bones</span><span class=o>.</span><span class=n>new</span><span class=p>(</span><span class=s2>&#34;hips&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>hips_bone</span><span class=o>.</span><span class=n>head</span> <span class=o>=</span> <span class=p>(</span><span class=mi>0</span><span class=p>,</span> <span class=mi>0</span><span class=p>,</span> <span class=mf>0.5</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>hips_bone</span><span class=o>.</span><span class=n>tail</span> <span class=o>=</span> <span class=p>(</span><span class=mi>0</span><span class=p>,</span> <span class=mi>0</span><span class=p>,</span> <span class=mf>0.75</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>spine_bone</span> <span class=o>=</span> <span class=n>armature</span><span class=o>.</span><span class=n>data</span><span class=o>.</span><span class=n>edit_bones</span><span class=o>.</span><span class=n>new</span><span class=p>(</span><span class=s2>&#34;spine&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>spine_bone</span><span class=o>.</span><span class=n>parent</span> <span class=o>=</span> <span class=n>hips_bone</span>
</span></span><span class=line><span class=cl><span class=n>spine_bone</span><span class=o>.</span><span class=n>head</span> <span class=o>=</span> <span class=p>(</span><span class=mi>0</span><span class=p>,</span> <span class=mi>0</span><span class=p>,</span> <span class=mf>0.75</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>spine_bone</span><span class=o>.</span><span class=n>tail</span> <span class=o>=</span> <span class=p>(</span><span class=mi>0</span><span class=p>,</span> <span class=mi>0</span><span class=p>,</span> <span class=mi>1</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>bpy</span><span class=o>.</span><span class=n>ops</span><span class=o>.</span><span class=n>object</span><span class=o>.</span><span class=n>mode_set</span><span class=p>(</span><span class=n>mode</span><span class=o>=</span><span class=s2>&#34;OBJECT&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>armature</span><span class=o>.</span><span class=n>data</span><span class=o>.</span><span class=n>vrm_addon_extension</span><span class=o>.</span><span class=n>vrm1</span><span class=o>.</span><span class=n>humanoid</span><span class=o>.</span><span class=n>human_bones</span><span class=o>.</span><span class=n>hips</span><span class=o>.</span><span class=n>node</span><span class=o>.</span><span class=n>bone_name</span> <span class=o>=</span> <span class=s2>&#34;hips&#34;</span>
</span></span><span class=line><span class=cl><span class=n>armature</span><span class=o>.</span><span class=n>data</span><span class=o>.</span><span class=n>vrm_addon_extension</span><span class=o>.</span><span class=n>vrm1</span><span class=o>.</span><span class=n>humanoid</span><span class=o>.</span><span class=n>human_bones</span><span class=o>.</span><span class=n>spine</span><span class=o>.</span><span class=n>node</span><span class=o>.</span><span class=n>bone_name</span> <span class=o>=</span> <span class=s2>&#34;spine&#34;</span>
</span></span></code></pre></div><h2 id=vrm-mtoonマテリアルの値を設定 class="relative group">VRM MToonマテリアルの値を設定 <span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#vrm-mtoon%e3%83%9e%e3%83%86%e3%83%aa%e3%82%a2%e3%83%ab%e3%81%ae%e5%80%a4%e3%82%92%e8%a8%ad%e5%ae%9a aria-label=アンカー>#</a></span></h2><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=kn>import</span> <span class=nn>bpy</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>context</span> <span class=o>=</span> <span class=n>bpy</span><span class=o>.</span><span class=n>context</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>image</span> <span class=o>=</span> <span class=n>context</span><span class=o>.</span><span class=n>blend_data</span><span class=o>.</span><span class=n>images</span><span class=o>.</span><span class=n>new</span><span class=p>(</span><span class=n>name</span><span class=o>=</span><span class=s2>&#34;New Image&#34;</span><span class=p>,</span> <span class=n>width</span><span class=o>=</span><span class=mi>32</span><span class=p>,</span> <span class=n>height</span><span class=o>=</span><span class=mi>32</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>material</span> <span class=o>=</span> <span class=n>context</span><span class=o>.</span><span class=n>blend_data</span><span class=o>.</span><span class=n>materials</span><span class=o>.</span><span class=n>new</span><span class=p>(</span><span class=s2>&#34;New MToon Material&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>material</span><span class=o>.</span><span class=n>vrm_addon_extension</span><span class=o>.</span><span class=n>mtoon1</span><span class=o>.</span><span class=n>enabled</span> <span class=o>=</span> <span class=kc>True</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>gltf</span> <span class=o>=</span> <span class=n>material</span><span class=o>.</span><span class=n>vrm_addon_extension</span><span class=o>.</span><span class=n>mtoon1</span>
</span></span><span class=line><span class=cl><span class=n>gltf</span><span class=o>.</span><span class=n>pbr_metallic_roughness</span><span class=o>.</span><span class=n>base_color_factor</span> <span class=o>=</span> <span class=p>(</span><span class=mi>0</span><span class=p>,</span> <span class=mi>1</span><span class=p>,</span> <span class=mi>0</span><span class=p>,</span> <span class=mi>1</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>gltf</span><span class=o>.</span><span class=n>pbr_metallic_roughness</span><span class=o>.</span><span class=n>base_color_texture</span><span class=o>.</span><span class=n>index</span><span class=o>.</span><span class=n>source</span> <span class=o>=</span> <span class=n>image</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># base_color_texture以外のテクスチャにも同様の設定が可能</span>
</span></span><span class=line><span class=cl><span class=n>gltf</span><span class=o>.</span><span class=n>pbr_metallic_roughness</span><span class=o>.</span><span class=n>base_color_texture</span><span class=o>.</span><span class=n>index</span><span class=o>.</span><span class=n>sampler</span><span class=o>.</span><span class=n>mag_filter</span> <span class=o>=</span> <span class=s2>&#34;NEAREST&#34;</span>  <span class=c1># or &#34;LINEAR&#34;</span>
</span></span><span class=line><span class=cl><span class=n>gltf</span><span class=o>.</span><span class=n>pbr_metallic_roughness</span><span class=o>.</span><span class=n>base_color_texture</span><span class=o>.</span><span class=n>index</span><span class=o>.</span><span class=n>sampler</span><span class=o>.</span><span class=n>min_filter</span> <span class=o>=</span> <span class=s2>&#34;NEAREST&#34;</span>  <span class=c1># or &#34;LINEAR&#34;, &#34;NEAREST_MIPMAP_NEAREST&#34;, &#34;LINEAR_MIPMAP_NEAREST&#34;, &#34;NEAREST_MIPMAP_LINEAR&#34;, &#34;LINEAR_MIPMAP_LINEAR&#34;</span>
</span></span><span class=line><span class=cl><span class=n>gltf</span><span class=o>.</span><span class=n>pbr_metallic_roughness</span><span class=o>.</span><span class=n>base_color_texture</span><span class=o>.</span><span class=n>index</span><span class=o>.</span><span class=n>sampler</span><span class=o>.</span><span class=n>wrap_s</span> <span class=o>=</span> <span class=s2>&#34;REPEAT&#34;</span>  <span class=c1># or &#34;CLAMP_TO_EDGE&#34;, &#34;MIRRORED_REPEAT&#34;</span>
</span></span><span class=line><span class=cl><span class=n>gltf</span><span class=o>.</span><span class=n>pbr_metallic_roughness</span><span class=o>.</span><span class=n>base_color_texture</span><span class=o>.</span><span class=n>index</span><span class=o>.</span><span class=n>sampler</span><span class=o>.</span><span class=n>wrap_t</span> <span class=o>=</span> <span class=s2>&#34;REPEAT&#34;</span>  <span class=c1># or &#34;CLAMP_TO_EDGE&#34;, &#34;MIRRORED_REPEAT&#34;</span>
</span></span><span class=line><span class=cl><span class=n>gltf</span><span class=o>.</span><span class=n>pbr_metallic_roughness</span><span class=o>.</span><span class=n>base_color_texture</span><span class=o>.</span><span class=n>extensions</span><span class=o>.</span><span class=n>khr_texture_transform</span><span class=o>.</span><span class=n>offset</span> <span class=o>=</span> <span class=p>(</span><span class=mi>0</span><span class=p>,</span> <span class=mi>0</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>gltf</span><span class=o>.</span><span class=n>pbr_metallic_roughness</span><span class=o>.</span><span class=n>base_color_texture</span><span class=o>.</span><span class=n>extensions</span><span class=o>.</span><span class=n>khr_texture_transform</span><span class=o>.</span><span class=n>scale</span> <span class=o>=</span> <span class=p>(</span><span class=mi>1</span><span class=p>,</span> <span class=mi>1</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>gltf</span><span class=o>.</span><span class=n>alpha_mode</span> <span class=o>=</span> <span class=s2>&#34;OPAQUE&#34;</span>  <span class=c1># or &#34;MASK&#34;, &#34;BLEND&#34;</span>
</span></span><span class=line><span class=cl><span class=n>gltf</span><span class=o>.</span><span class=n>double_sided</span> <span class=o>=</span> <span class=kc>False</span>
</span></span><span class=line><span class=cl><span class=n>gltf</span><span class=o>.</span><span class=n>alpha_cutoff</span> <span class=o>=</span> <span class=mf>0.5</span>
</span></span><span class=line><span class=cl><span class=n>gltf</span><span class=o>.</span><span class=n>normal_texture</span><span class=o>.</span><span class=n>index</span><span class=o>.</span><span class=n>source</span> <span class=o>=</span> <span class=n>image</span>
</span></span><span class=line><span class=cl><span class=n>gltf</span><span class=o>.</span><span class=n>normal_texture</span><span class=o>.</span><span class=n>scale</span> <span class=o>=</span> <span class=mi>1</span>
</span></span><span class=line><span class=cl><span class=n>gltf</span><span class=o>.</span><span class=n>emissive_texture</span><span class=o>.</span><span class=n>index</span><span class=o>.</span><span class=n>source</span> <span class=o>=</span> <span class=n>image</span>
</span></span><span class=line><span class=cl><span class=n>gltf</span><span class=o>.</span><span class=n>emissive_factor</span> <span class=o>=</span> <span class=p>(</span><span class=mi>0</span><span class=p>,</span> <span class=mi>0</span><span class=p>,</span> <span class=mi>0</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>gltf</span><span class=o>.</span><span class=n>extensions</span><span class=o>.</span><span class=n>khr_materials_emissive_strength</span><span class=o>.</span><span class=n>emissive_strength</span> <span class=o>=</span> <span class=mf>1.0</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>mtoon</span> <span class=o>=</span> <span class=n>gltf</span><span class=o>.</span><span class=n>extensions</span><span class=o>.</span><span class=n>vrmc_materials_mtoon</span>
</span></span><span class=line><span class=cl><span class=n>mtoon</span><span class=o>.</span><span class=n>transparent_with_z_write</span> <span class=o>=</span> <span class=kc>False</span>
</span></span><span class=line><span class=cl><span class=n>mtoon</span><span class=o>.</span><span class=n>render_queue_offset_number</span> <span class=o>=</span> <span class=mi>0</span>
</span></span><span class=line><span class=cl><span class=n>mtoon</span><span class=o>.</span><span class=n>shade_multiply_texture</span><span class=o>.</span><span class=n>index</span><span class=o>.</span><span class=n>source</span> <span class=o>=</span> <span class=n>image</span>
</span></span><span class=line><span class=cl><span class=n>mtoon</span><span class=o>.</span><span class=n>shade_color_factor</span> <span class=o>=</span> <span class=p>(</span><span class=mi>0</span><span class=p>,</span> <span class=mi>0</span><span class=p>,</span> <span class=mi>1</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>mtoon</span><span class=o>.</span><span class=n>shading_shift_texture</span><span class=o>.</span><span class=n>index</span><span class=o>.</span><span class=n>source</span> <span class=o>=</span> <span class=n>image</span>
</span></span><span class=line><span class=cl><span class=n>mtoon</span><span class=o>.</span><span class=n>shading_shift_texture</span><span class=o>.</span><span class=n>scale</span> <span class=o>=</span> <span class=mi>1</span>
</span></span><span class=line><span class=cl><span class=n>mtoon</span><span class=o>.</span><span class=n>shading_shift_factor</span> <span class=o>=</span> <span class=mi>0</span>
</span></span><span class=line><span class=cl><span class=n>mtoon</span><span class=o>.</span><span class=n>shading_toony_factor</span> <span class=o>=</span> <span class=mi>0</span>
</span></span><span class=line><span class=cl><span class=n>mtoon</span><span class=o>.</span><span class=n>gi_equalization_factor</span> <span class=o>=</span> <span class=mi>0</span>
</span></span><span class=line><span class=cl><span class=n>mtoon</span><span class=o>.</span><span class=n>matcap_factor</span> <span class=o>=</span> <span class=p>(</span><span class=mi>1</span><span class=p>,</span> <span class=mi>1</span><span class=p>,</span> <span class=mi>1</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>mtoon</span><span class=o>.</span><span class=n>matcap_texture</span><span class=o>.</span><span class=n>index</span><span class=o>.</span><span class=n>source</span> <span class=o>=</span> <span class=n>image</span>
</span></span><span class=line><span class=cl><span class=n>mtoon</span><span class=o>.</span><span class=n>parametric_rim_color_factor</span> <span class=o>=</span> <span class=p>(</span><span class=mi>0</span><span class=p>,</span> <span class=mi>0</span><span class=p>,</span> <span class=mi>0</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>mtoon</span><span class=o>.</span><span class=n>rim_multiply_texture</span><span class=o>.</span><span class=n>index</span><span class=o>.</span><span class=n>source</span> <span class=o>=</span> <span class=n>image</span>
</span></span><span class=line><span class=cl><span class=n>mtoon</span><span class=o>.</span><span class=n>rim_lighting_mix_factor</span> <span class=o>=</span> <span class=mi>0</span>
</span></span><span class=line><span class=cl><span class=n>mtoon</span><span class=o>.</span><span class=n>parametric_rim_fresnel_power_factor</span> <span class=o>=</span> <span class=mf>1.0</span>
</span></span><span class=line><span class=cl><span class=n>mtoon</span><span class=o>.</span><span class=n>parametric_rim_lift_factor</span> <span class=o>=</span> <span class=mf>1.0</span>
</span></span><span class=line><span class=cl><span class=n>mtoon</span><span class=o>.</span><span class=n>outline_width_mode</span> <span class=o>=</span> <span class=s2>&#34;worldCoordinates&#34;</span>  <span class=c1># or &#34;none&#34;, &#34;screenCoordinates&#34;</span>
</span></span><span class=line><span class=cl><span class=n>mtoon</span><span class=o>.</span><span class=n>outline_width_factor</span> <span class=o>=</span> <span class=mf>0.01</span>
</span></span><span class=line><span class=cl><span class=n>mtoon</span><span class=o>.</span><span class=n>outline_width_multiply_texture</span><span class=o>.</span><span class=n>index</span><span class=o>.</span><span class=n>source</span> <span class=o>=</span> <span class=n>image</span>
</span></span><span class=line><span class=cl><span class=n>mtoon</span><span class=o>.</span><span class=n>outline_color_factor</span> <span class=o>=</span> <span class=p>(</span><span class=mi>0</span><span class=p>,</span> <span class=mi>0</span><span class=p>,</span> <span class=mi>0</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>mtoon</span><span class=o>.</span><span class=n>outline_lighting_mix_factor</span> <span class=o>=</span> <span class=mi>0</span>
</span></span><span class=line><span class=cl><span class=n>mtoon</span><span class=o>.</span><span class=n>uv_animation_mask_texture</span><span class=o>.</span><span class=n>index</span><span class=o>.</span><span class=n>source</span> <span class=o>=</span> <span class=n>image</span>
</span></span><span class=line><span class=cl><span class=n>mtoon</span><span class=o>.</span><span class=n>uv_animation_scroll_x_speed_factor</span> <span class=o>=</span> <span class=mi>0</span>
</span></span><span class=line><span class=cl><span class=n>mtoon</span><span class=o>.</span><span class=n>uv_animation_scroll_y_speed_factor</span> <span class=o>=</span> <span class=mi>0</span>
</span></span><span class=line><span class=cl><span class=n>mtoon</span><span class=o>.</span><span class=n>uv_animation_rotation_speed_factor</span> <span class=o>=</span> <span class=mi>0</span>
</span></span></code></pre></div><h2 id=vrmのキャラクターを動的に生成しファイルにエクスポート class="relative group">VRMのキャラクターを動的に生成しファイルにエクスポート <span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#vrm%e3%81%ae%e3%82%ad%e3%83%a3%e3%83%a9%e3%82%af%e3%82%bf%e3%83%bc%e3%82%92%e5%8b%95%e7%9a%84%e3%81%ab%e7%94%9f%e6%88%90%e3%81%97%e3%83%95%e3%82%a1%e3%82%a4%e3%83%ab%e3%81%ab%e3%82%a8%e3%82%af%e3%82%b9%e3%83%9d%e3%83%bc%e3%83%88 aria-label=アンカー>#</a></span></h2><p><img src=/images/humanoid.gif alt width=240 height=240 style=display:inline;width:240px;height:auto;margin:auto;padding:0></p><p><a href=https://vrm-addon-for-blender.info/ja/create-humanoid-vrm-from-scratch/>人型のVRMモデルを作る</a>の手順をスクリプトで自動化し、VRMとしてエクスポートします。</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=kn>import</span> <span class=nn>bpy</span>
</span></span><span class=line><span class=cl><span class=kn>from</span> <span class=nn>pathlib</span> <span class=kn>import</span> <span class=n>Path</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>context</span> <span class=o>=</span> <span class=n>bpy</span><span class=o>.</span><span class=n>context</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>bpy</span><span class=o>.</span><span class=n>ops</span><span class=o>.</span><span class=n>icyp</span><span class=o>.</span><span class=n>make_basic_armature</span><span class=p>()</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>armature</span> <span class=o>=</span> <span class=n>context</span><span class=o>.</span><span class=n>active_object</span>
</span></span><span class=line><span class=cl><span class=n>armature</span><span class=o>.</span><span class=n>data</span><span class=o>.</span><span class=n>vrm_addon_extension</span><span class=o>.</span><span class=n>spec_version</span> <span class=o>=</span> <span class=s2>&#34;1.0&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>meta</span> <span class=o>=</span> <span class=n>armature</span><span class=o>.</span><span class=n>data</span><span class=o>.</span><span class=n>vrm_addon_extension</span><span class=o>.</span><span class=n>vrm1</span><span class=o>.</span><span class=n>meta</span>
</span></span><span class=line><span class=cl><span class=n>meta</span><span class=o>.</span><span class=n>vrm_name</span> <span class=o>=</span> <span class=s2>&#34;Your Model Name&#34;</span>
</span></span><span class=line><span class=cl><span class=n>meta</span><span class=o>.</span><span class=n>version</span> <span class=o>=</span> <span class=s2>&#34;1.0.0&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>humanoid</span> <span class=o>=</span> <span class=n>armature</span><span class=o>.</span><span class=n>data</span><span class=o>.</span><span class=n>vrm_addon_extension</span><span class=o>.</span><span class=n>vrm1</span><span class=o>.</span><span class=n>humanoid</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>bpy</span><span class=o>.</span><span class=n>ops</span><span class=o>.</span><span class=n>mesh</span><span class=o>.</span><span class=n>primitive_uv_sphere_add</span><span class=p>(</span><span class=n>radius</span><span class=o>=</span><span class=mf>0.25</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>head</span> <span class=o>=</span> <span class=n>context</span><span class=o>.</span><span class=n>active_object</span>
</span></span><span class=line><span class=cl><span class=n>head</span><span class=o>.</span><span class=n>parent</span> <span class=o>=</span> <span class=n>armature</span>
</span></span><span class=line><span class=cl><span class=n>head</span><span class=o>.</span><span class=n>parent_bone</span> <span class=o>=</span> <span class=n>humanoid</span><span class=o>.</span><span class=n>human_bones</span><span class=o>.</span><span class=n>head</span><span class=o>.</span><span class=n>node</span><span class=o>.</span><span class=n>bone_name</span>
</span></span><span class=line><span class=cl><span class=n>head</span><span class=o>.</span><span class=n>parent_type</span> <span class=o>=</span> <span class=s2>&#34;BONE&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>bpy</span><span class=o>.</span><span class=n>ops</span><span class=o>.</span><span class=n>mesh</span><span class=o>.</span><span class=n>primitive_cube_add</span><span class=p>(</span><span class=n>size</span><span class=o>=</span><span class=mf>0.4</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>spine</span> <span class=o>=</span> <span class=n>context</span><span class=o>.</span><span class=n>active_object</span>
</span></span><span class=line><span class=cl><span class=n>spine</span><span class=o>.</span><span class=n>parent</span> <span class=o>=</span> <span class=n>armature</span>
</span></span><span class=line><span class=cl><span class=n>spine</span><span class=o>.</span><span class=n>parent_bone</span> <span class=o>=</span> <span class=n>humanoid</span><span class=o>.</span><span class=n>human_bones</span><span class=o>.</span><span class=n>spine</span><span class=o>.</span><span class=n>node</span><span class=o>.</span><span class=n>bone_name</span>
</span></span><span class=line><span class=cl><span class=n>spine</span><span class=o>.</span><span class=n>parent_type</span> <span class=o>=</span> <span class=s2>&#34;BONE&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>bpy</span><span class=o>.</span><span class=n>ops</span><span class=o>.</span><span class=n>mesh</span><span class=o>.</span><span class=n>primitive_ico_sphere_add</span><span class=p>(</span><span class=n>radius</span><span class=o>=</span><span class=mf>0.1</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>left_upper_arm</span> <span class=o>=</span> <span class=n>context</span><span class=o>.</span><span class=n>active_object</span>
</span></span><span class=line><span class=cl><span class=n>left_upper_arm</span><span class=o>.</span><span class=n>parent</span> <span class=o>=</span> <span class=n>armature</span>
</span></span><span class=line><span class=cl><span class=n>left_upper_arm</span><span class=o>.</span><span class=n>parent_bone</span> <span class=o>=</span> <span class=n>humanoid</span><span class=o>.</span><span class=n>human_bones</span><span class=o>.</span><span class=n>left_upper_arm</span><span class=o>.</span><span class=n>node</span><span class=o>.</span><span class=n>bone_name</span>
</span></span><span class=line><span class=cl><span class=n>left_upper_arm</span><span class=o>.</span><span class=n>parent_type</span> <span class=o>=</span> <span class=s2>&#34;BONE&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>bpy</span><span class=o>.</span><span class=n>ops</span><span class=o>.</span><span class=n>mesh</span><span class=o>.</span><span class=n>primitive_ico_sphere_add</span><span class=p>(</span><span class=n>radius</span><span class=o>=</span><span class=mf>0.1</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>left_hand</span> <span class=o>=</span> <span class=n>context</span><span class=o>.</span><span class=n>active_object</span>
</span></span><span class=line><span class=cl><span class=n>left_hand</span><span class=o>.</span><span class=n>parent</span> <span class=o>=</span> <span class=n>armature</span>
</span></span><span class=line><span class=cl><span class=n>left_hand</span><span class=o>.</span><span class=n>parent_bone</span> <span class=o>=</span> <span class=n>humanoid</span><span class=o>.</span><span class=n>human_bones</span><span class=o>.</span><span class=n>left_hand</span><span class=o>.</span><span class=n>node</span><span class=o>.</span><span class=n>bone_name</span>
</span></span><span class=line><span class=cl><span class=n>left_hand</span><span class=o>.</span><span class=n>parent_type</span> <span class=o>=</span> <span class=s2>&#34;BONE&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>bpy</span><span class=o>.</span><span class=n>ops</span><span class=o>.</span><span class=n>mesh</span><span class=o>.</span><span class=n>primitive_ico_sphere_add</span><span class=p>(</span><span class=n>radius</span><span class=o>=</span><span class=mf>0.1</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>right_upper_arm</span> <span class=o>=</span> <span class=n>context</span><span class=o>.</span><span class=n>active_object</span>
</span></span><span class=line><span class=cl><span class=n>right_upper_arm</span><span class=o>.</span><span class=n>parent</span> <span class=o>=</span> <span class=n>armature</span>
</span></span><span class=line><span class=cl><span class=n>right_upper_arm</span><span class=o>.</span><span class=n>parent_bone</span> <span class=o>=</span> <span class=n>humanoid</span><span class=o>.</span><span class=n>human_bones</span><span class=o>.</span><span class=n>right_upper_arm</span><span class=o>.</span><span class=n>node</span><span class=o>.</span><span class=n>bone_name</span>
</span></span><span class=line><span class=cl><span class=n>right_upper_arm</span><span class=o>.</span><span class=n>parent_type</span> <span class=o>=</span> <span class=s2>&#34;BONE&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>bpy</span><span class=o>.</span><span class=n>ops</span><span class=o>.</span><span class=n>mesh</span><span class=o>.</span><span class=n>primitive_ico_sphere_add</span><span class=p>(</span><span class=n>radius</span><span class=o>=</span><span class=mf>0.1</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>right_hand</span> <span class=o>=</span> <span class=n>context</span><span class=o>.</span><span class=n>active_object</span>
</span></span><span class=line><span class=cl><span class=n>right_hand</span><span class=o>.</span><span class=n>parent</span> <span class=o>=</span> <span class=n>armature</span>
</span></span><span class=line><span class=cl><span class=n>right_hand</span><span class=o>.</span><span class=n>parent_bone</span> <span class=o>=</span> <span class=n>humanoid</span><span class=o>.</span><span class=n>human_bones</span><span class=o>.</span><span class=n>right_hand</span><span class=o>.</span><span class=n>node</span><span class=o>.</span><span class=n>bone_name</span>
</span></span><span class=line><span class=cl><span class=n>right_hand</span><span class=o>.</span><span class=n>parent_type</span> <span class=o>=</span> <span class=s2>&#34;BONE&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>bpy</span><span class=o>.</span><span class=n>ops</span><span class=o>.</span><span class=n>mesh</span><span class=o>.</span><span class=n>primitive_ico_sphere_add</span><span class=p>(</span><span class=n>radius</span><span class=o>=</span><span class=mf>0.1</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>left_upper_leg</span> <span class=o>=</span> <span class=n>context</span><span class=o>.</span><span class=n>active_object</span>
</span></span><span class=line><span class=cl><span class=n>left_upper_leg</span><span class=o>.</span><span class=n>parent</span> <span class=o>=</span> <span class=n>armature</span>
</span></span><span class=line><span class=cl><span class=n>left_upper_leg</span><span class=o>.</span><span class=n>parent_bone</span> <span class=o>=</span> <span class=n>humanoid</span><span class=o>.</span><span class=n>human_bones</span><span class=o>.</span><span class=n>left_upper_leg</span><span class=o>.</span><span class=n>node</span><span class=o>.</span><span class=n>bone_name</span>
</span></span><span class=line><span class=cl><span class=n>left_upper_leg</span><span class=o>.</span><span class=n>parent_type</span> <span class=o>=</span> <span class=s2>&#34;BONE&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>bpy</span><span class=o>.</span><span class=n>ops</span><span class=o>.</span><span class=n>mesh</span><span class=o>.</span><span class=n>primitive_ico_sphere_add</span><span class=p>(</span><span class=n>radius</span><span class=o>=</span><span class=mf>0.1</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>right_upper_leg</span> <span class=o>=</span> <span class=n>context</span><span class=o>.</span><span class=n>active_object</span>
</span></span><span class=line><span class=cl><span class=n>right_upper_leg</span><span class=o>.</span><span class=n>parent</span> <span class=o>=</span> <span class=n>armature</span>
</span></span><span class=line><span class=cl><span class=n>right_upper_leg</span><span class=o>.</span><span class=n>parent_bone</span> <span class=o>=</span> <span class=n>humanoid</span><span class=o>.</span><span class=n>human_bones</span><span class=o>.</span><span class=n>right_upper_leg</span><span class=o>.</span><span class=n>node</span><span class=o>.</span><span class=n>bone_name</span>
</span></span><span class=line><span class=cl><span class=n>right_upper_leg</span><span class=o>.</span><span class=n>parent_type</span> <span class=o>=</span> <span class=s2>&#34;BONE&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>bpy</span><span class=o>.</span><span class=n>ops</span><span class=o>.</span><span class=n>mesh</span><span class=o>.</span><span class=n>primitive_ico_sphere_add</span><span class=p>(</span><span class=n>radius</span><span class=o>=</span><span class=mf>0.1</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>left_lower_leg</span> <span class=o>=</span> <span class=n>context</span><span class=o>.</span><span class=n>active_object</span>
</span></span><span class=line><span class=cl><span class=n>left_lower_leg</span><span class=o>.</span><span class=n>parent</span> <span class=o>=</span> <span class=n>armature</span>
</span></span><span class=line><span class=cl><span class=n>left_lower_leg</span><span class=o>.</span><span class=n>parent_bone</span> <span class=o>=</span> <span class=n>humanoid</span><span class=o>.</span><span class=n>human_bones</span><span class=o>.</span><span class=n>left_lower_leg</span><span class=o>.</span><span class=n>node</span><span class=o>.</span><span class=n>bone_name</span>
</span></span><span class=line><span class=cl><span class=n>left_lower_leg</span><span class=o>.</span><span class=n>parent_type</span> <span class=o>=</span> <span class=s2>&#34;BONE&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>bpy</span><span class=o>.</span><span class=n>ops</span><span class=o>.</span><span class=n>mesh</span><span class=o>.</span><span class=n>primitive_ico_sphere_add</span><span class=p>(</span><span class=n>radius</span><span class=o>=</span><span class=mf>0.1</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>right_lower_leg</span> <span class=o>=</span> <span class=n>context</span><span class=o>.</span><span class=n>active_object</span>
</span></span><span class=line><span class=cl><span class=n>right_lower_leg</span><span class=o>.</span><span class=n>parent</span> <span class=o>=</span> <span class=n>armature</span>
</span></span><span class=line><span class=cl><span class=n>right_lower_leg</span><span class=o>.</span><span class=n>parent_bone</span> <span class=o>=</span> <span class=n>humanoid</span><span class=o>.</span><span class=n>human_bones</span><span class=o>.</span><span class=n>right_lower_leg</span><span class=o>.</span><span class=n>node</span><span class=o>.</span><span class=n>bone_name</span>
</span></span><span class=line><span class=cl><span class=n>right_lower_leg</span><span class=o>.</span><span class=n>parent_type</span> <span class=o>=</span> <span class=s2>&#34;BONE&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>output_filepath</span> <span class=o>=</span> <span class=nb>str</span><span class=p>(</span><span class=n>Path</span><span class=o>.</span><span class=n>home</span><span class=p>()</span> <span class=o>/</span> <span class=s2>&#34;path_to_your_vrm_model.vrm&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>result</span> <span class=o>=</span> <span class=n>bpy</span><span class=o>.</span><span class=n>ops</span><span class=o>.</span><span class=n>export_scene</span><span class=o>.</span><span class=n>vrm</span><span class=p>(</span><span class=n>filepath</span><span class=o>=</span><span class=n>output_filepath</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=k>if</span> <span class=n>result</span> <span class=o>!=</span> <span class=p>{</span><span class=s2>&#34;FINISHED&#34;</span><span class=p>}:</span>
</span></span><span class=line><span class=cl>    <span class=k>raise</span> <span class=ne>Exception</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;Failed to export vrm: </span><span class=si>{</span><span class=n>result</span><span class=si>}</span><span class=s2>&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;</span><span class=si>{</span><span class=n>output_filepath</span><span class=si>=}</span><span class=s2>&#34;</span><span class=p>)</span>
</span></span></code></pre></div><h2 id=関連リンク class="relative group">関連リンク <span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#%e9%96%a2%e9%80%a3%e3%83%aa%e3%83%b3%e3%82%af aria-label=アンカー>#</a></span></h2><ul><li><a href=https://vrm-addon-for-blender.info/ja/>トップページ</a></li></ul></div></section><section class="mt-10 prose dark:prose-invert"><p class="py-8 border-t"><em>ここに掲載する記事はまだありません。</em></p></section><div class="pointer-events-none absolute top-[100vh] bottom-0 w-12 ltr:right-0 rtl:left-0"><a href=#the-top class="pointer-events-auto sticky top-[calc(100vh-5.5rem)] flex h-12 w-12 items-center justify-center rounded-full bg-neutral/50 text-xl text-neutral-700 backdrop-blur hover:text-primary-600 dark:bg-neutral-800/50 dark:text-neutral dark:hover:text-primary-400" aria-label=TOPへスクロール title=TOPへスクロール>&uarr;</a></div></main><footer class="py-10 print:hidden"><div class="flex items-center justify-between"><div><p class="text-sm text-neutral-500 dark:text-neutral-400">© 2022 - 2023 saturday06</p><p class="text-xs text-neutral-500 dark:text-neutral-400">Powered by <a class="hover:underline hover:decoration-primary-400 hover:text-primary-500" href=https://gohugo.io/ target=_blank rel="noopener noreferrer">Hugo</a> & <a class="hover:underline hover:decoration-primary-400 hover:text-primary-500" href=https://git.io/hugo-congo target=_blank rel="noopener noreferrer">Congo</a></p></div></div></footer></div></body></html>